<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fitness Progress Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f6f8;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #0f766e;
    }
    .section {
      margin-bottom: 2rem;
    }
    .progress-circle {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: conic-gradient(#0f766e calc(var(--progress) * 1%), #e0e0e0 0);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
    }
    .day {
      padding: 0.75rem;
      background-color: #f0f0f0;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.2s;
      text-align: center;
    }
    .day.done {
      background-color: #c6f6d5;
    }
    .day.missed {
      background-color: #feb2b2;
    }
    .day-header {
      font-weight: bold;
      text-align: center;
      background-color: #e2e8f0;
      padding: 0.5rem;
      border-radius: 5px;
    }
    .checklist-item {
      margin-bottom: 1rem;
    }
    .checklist-item label {
      margin-left: 0.5rem;
    }
    .log-area, input[type="file"], input[type="number"] {
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
    }
    .achievements {
      background-color: #edf2f7;
      padding: 1rem;
      border-radius: 5px;
    }
    .calendar-nav {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    button {
      background-color: #0f766e;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
    }
    canvas {
      max-width: 100%;
      margin-top: 1rem;
    }
    @media (max-width: 600px) {
      .calendar {
        grid-template-columns: repeat(4, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Fitness Progress Tracker</h2>

    <div class="section">
      <label>Current Weight (kg):</label>
      <input type="number" id="currentWeight" />

      <label>Target Weight (kg):</label>
      <input type="number" id="targetWeight" />

      <label>Workout Consistency (%):</label>
      <input type="number" id="consistency" />

      <div class="progress-circle" style="--progress: 0" id="progressCircle">0%</div>
    </div>

    <div class="section">
      <h3>Upload Transformation Image</h3>
      <input type="file" accept="image/*" />
    </div>

    <div class="section">
        <div class="checklist-container">
  <h2>üìù Daily Checklist</h2>
  <ul id="checklist" class="checklist"></ul>

  <div class="edit-controls">
    <input type="text" id="newTask" placeholder="New task...">
    <button onclick="addTask()">Add Task</button>
    <button onclick="toggleEditMode()">Edit Checklist</button>
    <button onclick="saveChecklist()">Save Checklist</button>
  </div>
</div>
    </div>

    <div class="section">
      <h3>Workout Calendar</h3>
      <div class="calendar-nav">
        <button onclick="changeWeek(-1)">&lt; Previous</button>
        <span id="weekLabel">Week 1</span>
        <button onclick="changeWeek(1)">Next &gt;</button>
      </div>
      <div class="calendar" id="calendar"></div>
      <div class="section">
        <h4>Weekly Summary</h4>
        <p id="summaryText">Done: 0 | Missed: 0</p>
      </div>
    </div>

    <div class="section">
      <h3>Progress Graph</h3>
      <canvas id="progressChart" height="200"></canvas>
    </div>

    <div class="section">
      <h3>Export Progress</h3>
      <button onclick="exportReport()">Download Weekly Report</button>
    </div>

    <div class="section">
      <h3>Workout / Meal Log</h3>
      <textarea class="log-area" rows="4" placeholder="Write your workout or meal details..."></textarea>
    </div>

    <div class="section achievements">
      <h3>Achievements</h3>
      <ul>
        <li>7-day streak üî•</li>
        <li>Lost first 2 kg üéØ</li>
        <li>Logged meals 5 days in a row ü•ó</li>
      </ul>
    </div>
  </div>

  <script>
    const progressCircle = document.getElementById('progressCircle');
    const consistencyInput = document.getElementById('consistency');

    consistencyInput.addEventListener('input', () => {
      let val = parseInt(consistencyInput.value);
      if (val < 0) val = 0;
      if (val > 100) val = 100;
      progressCircle.style.setProperty('--progress', val);
      progressCircle.innerText = val + '%';
    });

    const calendar = document.getElementById('calendar');
    const weekLabel = document.getElementById('weekLabel');
    const summaryText = document.getElementById('summaryText');
    let currentWeek = 1;
    const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

    function loadCalendar(week) {
      calendar.innerHTML = '';
      weekLabel.innerText = 'Week ' + week;

      weekDays.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.classList.add('day-header');
        dayHeader.innerText = day;
        calendar.appendChild(dayHeader);
      });

      for (let i = 0; i < 7; i++) {
        const key = `week${week}_day${i}`;
        const saved = localStorage.getItem(key);
        const dayDiv = document.createElement('div');
        dayDiv.classList.add('day');
        if (saved === 'done') dayDiv.classList.add('done');
        else if (saved === 'missed') dayDiv.classList.add('missed');

        dayDiv.innerText = i + 1;
        dayDiv.addEventListener('click', () => {
          if (dayDiv.classList.contains('done')) {
            dayDiv.classList.remove('done');
            dayDiv.classList.add('missed');
            localStorage.setItem(key, 'missed');
          } else if (dayDiv.classList.contains('missed')) {
            dayDiv.classList.remove('missed');
            localStorage.removeItem(key);
          } else {
            dayDiv.classList.add('done');
            localStorage.setItem(key, 'done');
          }
          updateSummary();
          drawChart();
        });
        calendar.appendChild(dayDiv);
      }
      updateSummary();
      drawChart();
    }

    function changeWeek(delta) {
      currentWeek += delta;
      if (currentWeek < 1) currentWeek = 1;
      loadCalendar(currentWeek);
    }

    function updateSummary() {
      let done = 0, missed = 0;
      for (let i = 0; i < 7; i++) {
        const val = localStorage.getItem(`week${currentWeek}_day${i}`);
        if (val === 'done') done++;
        if (val === 'missed') missed++;
      }
      summaryText.innerText = `Done: ${done} | Missed: ${missed}`;
    }

    function drawChart() {
      const data = [];
      for (let w = 1; w <= currentWeek; w++) {
        let count = 0;
        for (let i = 0; i < 7; i++) {
          if (localStorage.getItem(`week${w}_day${i}`) === 'done') count++;
        }
        data.push(count);
      }

      const ctx = document.getElementById('progressChart').getContext('2d');
      if (window.myChart) window.myChart.destroy();
      window.myChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: data.map((_, i) => 'Week ' + (i + 1)),
          datasets: [{
            label: 'Days Done',
            data: data,
            backgroundColor: '#0f766e'
          }]
        },
        options: {
          scales: {
            y: { beginAtZero: true, max: 7 }
          }
        }
      });
    }

    function exportReport() {
      let report = `Workout Report\n\n`;
      for (let w = 1; w <= currentWeek; w++) {
        let done = 0, missed = 0;
        for (let i = 0; i < 7; i++) {
          const val = localStorage.getItem(`week${w}_day${i}`);
          if (val === 'done') done++;
          if (val === 'missed') missed++;
        }
        report += `Week ${w}: Done = ${done}, Missed = ${missed}\n`;
      }
      const blob = new Blob([report], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'workout_report.txt';
      link.click();
    }

    loadCalendar(currentWeek);

    let editMode = false;
let checklistData = JSON.parse(localStorage.getItem("checklist")) || [
  "Drink 3L Water",
  "Complete Workout",
  "Eat 3 Meals",
];

function renderChecklist() {
  const checklist = document.getElementById("checklist");
  checklist.innerHTML = "";

  checklistData.forEach((item, index) => {
    const li = document.createElement("li");

    if (editMode) {
      li.classList.add("editable");

      const input = document.createElement("input");
      input.type = "text";
      input.value = item;
      input.oninput = (e) => checklistData[index] = e.target.value;

      const deleteBtn = document.createElement("button");
      deleteBtn.innerText = "üóëÔ∏è";
      deleteBtn.onclick = () => deleteTask(index);

      li.appendChild(input);
      li.appendChild(deleteBtn);
    } else {
      const radio = document.createElement("input");
      radio.type = "radio";
      radio.name = "task" + index;

      const label = document.createElement("label");
      label.innerText = item;

      li.appendChild(radio);
      li.appendChild(label);
    }

    checklist.appendChild(li);
  });
}

function toggleEditMode() {
  editMode = !editMode;
  renderChecklist();
}

function addTask() {
  const newTask = document.getElementById("newTask").value.trim();
  if (newTask) {
    checklistData.push(newTask);
    document.getElementById("newTask").value = "";
    renderChecklist();
  }
}

function deleteTask(index) {
  checklistData.splice(index, 1);
  renderChecklist();
}

function saveChecklist() {
  localStorage.setItem("checklist", JSON.stringify(checklistData));
  editMode = false;
  renderChecklist();
}

window.onload = renderChecklist;

  </script>
</body>
</html>
